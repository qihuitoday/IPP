/**
 * Derek Qi
 */
package com.qihui.ssh.web.site;

import java.util.Date;
import java.util.List;

import javax.servlet.http.HttpServletRequest;

import org.apache.struts2.ServletActionContext;

import com.qihui.ssh.dao.entities.Level;
import com.qihui.ssh.dao.entities.Region;
import com.qihui.ssh.dao.entities.Site;
import com.qihui.ssh.service.site.SiteService;
import com.qihui.ssh.web.BaseAction;

public class AddSiteAction extends BaseAction {

	private static final long serialVersionUID = 1L;

	SiteService siteService;

	private Site site;
	private List<Region> provinceList;

	public String execute() throws Exception {
		HttpServletRequest request = ServletActionContext.getRequest();
		String flag = request.getParameter("method");
		if ("toAddSite".equals(flag)) {
			provinceList = siteService.getAllProvince();
			return "toAddSite";
		} else if ("toRegestor".equals(flag)) {
			
			return "toRegestor";
		} else {
			Site site = this.getSite();
			Date sysdate = new Date();
			site.setCreateDate(sysdate);
			site.setUpdateDate(sysdate);
			siteService.addSite(site);
			return "success";
		}
	}

	public Site getSite() {
		return site;
	}

	public void setSite(Site site) {
		this.site = site;
	}

	public void setSiteService(SiteService siteService) {
		this.siteService = siteService;
	}

	public List<Level> getLevelList() {
		return levelList;
	}

	public void setLevelList(List<Level> levelList) {
		this.levelList = levelList;
	}

	public List<Region> getProvinceList() {
		return provinceList;
	}

	public void setProvinceList(List<Region> provinceList) {
		this.provinceList = provinceList;
	}

}
