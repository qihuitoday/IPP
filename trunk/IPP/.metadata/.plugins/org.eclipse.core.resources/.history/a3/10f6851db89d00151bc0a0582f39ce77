<jsp:include page="novelTop.jsp" ></jsp:include>
<%@ page contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ page contentType="text/html; charset=UTF-8"%>
<%@ page pageEncoding="UTF-8" %>
<title>小说列表</title>
<script type="text/javascript">
	
	function addChapter(){
		var title = $("#title");
		var content = $("#content");
		var error = $('.titleError');
		var reerror = $('.contentError');
		if(title.val() != '') {
			error.html('');
		} else {
			error.html('<font color="red">标题不能为空!</font>');
			return;
		}
		if(content.val() != ''){
			reerror.html('');
		} else {
			reerror.html('<font color="red">内容不能为空!</font>');
			return;
		}
		var form = document.myForm;
	    //setAllDisabled(form);
	    form.action = "novelChapterAdd";
	    form.submit();
	}
	
	function uploadChapter(){
		var novelFile = $("#novelFile");
		var novelFileError = $('.novelFileError');
		if(novelFile.val() != ''){
			novelFileError.html('');
		} else {
			novelFileError.html('<font color="red">文件不能为空!</font>');
			return;
		}
		var form = document.myForm;
	    form.action = "novelUploadFile";
	    form.submit();
	}
	 
</script>
</head>

<body>                                    
<form action="novelChapterAdd" name="myForm" method="post" enctype="multipart/form-data">
	<jsp:include page="novelHeader.jsp" ></jsp:include>
	<div class="area">
		<div class="infoPath">
			<div style="float:left;">
                <a href="/" target="_blank">17k小说网 </a>&gt;&gt;
                <a href="http://www.17k.com/xuanhuan/" target="_blank"> 玄幻小说 </a>&gt;&gt;
                <a href="http://all.17k.com/all/xuanhuan/yszb/" target="_blank"> 异世争霸 </a>&gt;&gt;
                <span class="c6"><a href="/book/462443.html"> 百族之王 </a></span>
                <span class="c9"> [书号462443] </span>
            </div>
            <div style="float:right; padding-right:15px;">
                <a href="#" target="_blank" style="color:#F00;"> 17k热门实体书火热购买中! </a>
            </div>
        </div>
		<div class="blank10"></div>
		<div class="area690" style="position:relative;">
			<div class="bookBox border" style="position:relative;">
				<div>
					<span>
						<h3 class="post_title">标题</h3>
						<input id="title" name="novelchapter.chapterName" class="post_text_title" type="text" maxlength="30">
					</span>
					<span class="post_title_small" id="titleTips"> 最长40字 </span>
					<span class="titleError"></span>
				</div>
				<div class="blank10"></div>
				<div>
					<span>
						<h3 class="post_title">内容</h3>
	                    <textarea id="content" name="novelchapter.chapterText" class="post_text_content"></textarea>
					</span>
					<span class="contentError"></span>
				</div>
				<div class="blank10"></div>
				<div class="module-task-wrap">
					<a href="#" class="task-btn" onclick="addChapter();">提交<a>
				</div>
				<div class="blank20"></div>
			</div>
        </div>
        <div class="area250">
            <div class="tkzpj borPad">
                <div class="tit01">
                    <h2>
                    	<s:a href="novelList?novelID=%{novel.id}">
							<em class="c11"><s:property value="novel.novelName"/></em>
                    	</s:a>的最新章节
                    </h2>
                </div>
                <div class="con">
                    <ul>
                        <li class="nob">
                        	第<s:property value="novel.novelchapter.chapterId"/>章
                            <a href="novelDetail?novelChapterID=<s:property value='novel.novelchapter.id'/>"><s:property value="novel.novelchapter.chapterName"/></a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="blank10"></div>
            <div class="tkzpj borPad">
                <div class="tit01">
                    <h2>上传文件</h2>
                </div>
                <div class="con">
                    <ul>
                        <s:file id="novelFile" name="novelFile"></s:file>
                        <span class="novelFileError"></span>
                    </ul>
                </div>
                <div class="module-task-wrap">
					<a href="#" class="task-btn" onclick="uploadChapter();">上传<a>
				</div>
            </div>
            <div class="blank10"></div>
        </div>
    </div>
    <s:hidden name="novelID" value="%{novel.id}"/>
</form>
</body>
